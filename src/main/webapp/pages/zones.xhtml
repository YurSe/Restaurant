<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Table reservation</title>
    <link rel="stylesheet" href="/resources/css/bootstrap.min.css"/>
</h:head>

<h:body>
    <h:outputStylesheet name="css/overridePrimefaces.css"/>
    <ui:include src="composition/mainMenu.xhtml"/>
    <p:growl id="growl" for="messageAuth" showDetail="true" autoUpdate="true"/>
    <h:form id="zoneForm">

        <p:dataGrid var="zone" value="#{zoneContr.zones}" columns="3" layout="grid"
                    rows="12" paginator="true" style="width:80%; margin-left: 10%; margin-top: 1%;"
                    paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
            <f:facet name="header">
                Zone selection
            </f:facet>

            <p:panel header="#{zone.title}" style="height: 100%" styleClass="form-horizontal">
                <div class="form-group">
                    <p:lightBox id="u">
                        <h:outputLink value="#{zone.image}">
                            <h:graphicImage url="#{zone.image}"
                                            style="min-height:200px;max-height: 200px;width: 100%"/>
                        </h:outputLink>
                    </p:lightBox>
                </div>
                <div class="form-group" style="min-height:150px">
                    <h:outputText value="Description:"/>
                    <h:outputText value="#{zone.description}" style="font-weight: bold"/>
                </div>
                <div class="form-group">
                    <div style="text-align: center">
                        <h:commandButton value="Reserve table"
                                         actionListener="#{zoneContr.redirectToPageWithTableReservation}"
                                         styleClass="btn btn-success">
                            <f:setPropertyActionListener target="#{zoneContr.zone}" value="#{zone}"/>
                            <f:ajax render="growl"/>
                        </h:commandButton>
                    </div>
                </div>
                <div class="form-group">
                    <div style="text-align: center">
                        <h:commandButton value="Edit zone"
                                         action="/pages/add_editZone?faces-redirect=true"
                                         style="width: 125px"
                                         styleClass="btn btn-warning" rendered="#{springUserController.IsAdmin()}">
                            <f:setPropertyActionListener target="#{zoneContr.zone}" value="#{zone}"/>
                        </h:commandButton>
                    </div>
                </div>
                <div class="form-group">
                    <div style="text-align: center">
                        <p:commandButton value="Delete zone"
                                         styleClass="btn btn-danger"
                                         style="width: 130px;"
                                         update="zoneForm"
                                         action="#{zoneContr.deleteZone(zone.id)}"
                                         rendered="#{springUserController.IsAdmin()}">
                            <p:confirm header="Confirmation" message="Are you sure you want to delete this zone?"
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                    </div>
                </div>
            </p:panel>
        </p:dataGrid>

    </h:form>

    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
        <p:commandButton value="Да" type="button" styleClass="ui-confirmdialog-yes"
                         icon="ui-icon-check"/>
        <p:commandButton value="Нет" type="button" styleClass="ui-confirmdialog-no"
                         icon="ui-icon-close"/>
    </p:confirmDialog>

    <h:commandButton value="Add zone" style="margin-left: 10%; margin-top: 1%; width: 125px"
                     actionListener="#{zoneContr.initZone}"
                     action="/pages/add_editZone?faces-redirect=true" styleClass="btn btn-success"
                     rendered="#{springUserController.IsAdmin()}">
    </h:commandButton>


    <ui:include src="composition/footer.xhtml"/>

</h:body>
</html>