<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Table reservation</title>
    <link rel="stylesheet" href="/resources/css/search-form.css"/>
    <link rel="stylesheet" href="/resources/css/bootstrap.min.css"/>
</h:head>

<h:body>
    <h:outputStylesheet name="css/overridePrimefaces.css"/>
    <ui:include src="composition/mainMenu.xhtml"/>

    <h:form id="zoneForm">
        <div id="search-form">
            <p:dataGrid var="zone" value="#{zoneContr.zones}" columns="3" layout="grid"
                        rows="12" paginator="true" style="width:110%;"
                        paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
                <f:facet name="header">
                    Zone selection
                </f:facet>

                <p:panel header="#{zone.title}" style="height: 100%" styleClass="form-horizontal">
                    <div class="form-group">
                        <p:lightBox id="u">
                            <h:outputLink value="#{zone.image}">
                                <h:graphicImage url="#{zone.image}"
                                                style="min-height:200px;max-height: 200px;width: 100%"/>
                            </h:outputLink>
                        </p:lightBox>
                    </div>
                    <div class="form-group" style="min-height:150px">
                        <h:outputText value="Description:"/>
                        <h:outputText value="#{zone.description}" style="font-weight: bold"/>
                    </div>
                    <div class="form-group">
                        <div style="text-align: center">
                            <h:commandButton value="Reserve table"
                                             action="/pages/reservation?faces-redirect=true"
                                             styleClass="btn btn-success">
                                <f:setPropertyActionListener target="#{zoneContr.zone}" value="#{zone}"/>
                            </h:commandButton>
                        </div>
                    </div>
                    <div class="form-group">
                        <div style="text-align: center">
                            <p:commandButton value="Edit zone"
                                             action="/pages/add_editZone?faces-redirect=true"
                                             styleClass="btn btn-success" rendered="#{springUserController.IsAdmin()}">
                                <f:setPropertyActionListener target="#{zoneContr.zone}" value="#{zone}"/>
                            </p:commandButton>
                        </div>
                    </div>
                    <div class="form-group">
                        <div style="text-align: center">
                            <p:commandButton value="Delete zone"
                                             styleClass="btn btn-success"
                                             style="width: 130px;"
                                             onclick="PF('groupDeleteConfirm').show()"
                                             rendered="#{springUserController.IsAdmin()}">
                            </p:commandButton>
                            <p:confirmDialog showEffect="fade" hideEffect="fade"
                                             message="Are you sure you want to delete this zone?"
                                             widgetVar="groupDeleteConfirm">
                                <p:commandButton value="Да" styleClass="ui-confirmdialog-yes"
                                                 icon="ui-icon-check" actionListener="#{zoneContr.deleteZone(zone.id)}"
                                                 ajax="false" action="/pages/zones?faces-redirect=true"
                                                 oncomplete="PF('groupDeleteConfirm').hide()">
                                    <f:actionListener binding="#{zoneContr.init()}"/>
                                </p:commandButton>
                                <p:commandButton value="Нет" styleClass="ui-confirmdialog-no"
                                                 icon="ui-icon-close" onclick="PF('groupDeleteConfirm').hide()"/>
                            </p:confirmDialog>
                        </div>
                    </div>
                </p:panel>
            </p:dataGrid>
        </div>
    </h:form>

    <p:commandButton value="Add zone" style="margin-left: 10%; margin-top: 1%;"
                     actionListener="#{zoneContr.initZone()}"
                     action="/pages/add_editZone?faces-redirect=true" styleClass="btn btn-success"
                     rendered="#{springUserController.IsAdmin()}">
    </p:commandButton>


    <ui:include src="composition/footer.xhtml"/>

</h:body>
</html>